<!DOCTYPE html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso de Logica 2</title>
</head>

<body>
<!--barras.html-->

<canvas width = "600" height = "400"> </canvas>

<script>
    var tela = document.querySelector("canvas");
    var pincel = tela.getContext("2d");

    //vetor com cores do grafico na ordem de exibicao, de cima para baixo
    var cores = ["blue", "green", "yellow", "red"];

    //vetor das series % do grafico
    var serie2015 = [50, 25, 20, 5];
    var serie2016 = [65, 20, 13, 2];

    //funcao que desenha um texto
    function desenhaTexto(texto, x, y){
        pincel.fillStyle = "black";
        pincel.font = "18px Georgia";
        pincel.fillText(texto, x, y);
    }

    //funcao que desenha uma barra com 4 retangulos
    function desenhaBarra(x, y, serie, cores, texto){

        desenhaTexto(texto, x, y - 10);

        //variavel para posicionar os retangulos certinhos no eixo y; inicialmente recebe o valor de y
        var tamy = y;

        //laco de repeticao para criar os 4 retangulos
        for(var i = 0; i < 4; i++){

            //atribui ao pincel o valor da cor, conforme i++
            pincel.fillStyle = cores[i];
            pincel.fillRect(x, tamy, 50, serie[i]);//desenhar um retangulo
            pincel.strokeRect(x, tamy, 50, serie[i]);//desenhar a borda

            tamy += serie[i];//adiciona ao valor o tamanho da serie, para que o proximo retangulo comece do retangulo anterior

        }
    }

    //chamada da funcao para desenhar as duas barras
    desenhaBarra(50, 50, serie2015, cores, '2015');
    desenhaBarra(150, 50, serie2016, cores, '2016');

</script>
</html>